{{ define "index" }}
<!DOCTYPE html>
<html>
  <head>
    <title>HATO Sakayukari Sakuragi</title>
    <!-- <meta http-equiv="refresh" content="1"> -->
    <script>
      //setTimeout(() => {
      //  window.location.reload(1);
      //}, 100);
    </script>
  </head>
  <body>
    {{ printf "%#v" .att }}
    {{ $t := index .gs.Trains 0 }}
    {{ printf "%#v" $t }}
    {{ printf "%#v" $t.Path }}
    {{ $Z := index .gs.Layout.Lines 0 }}
    {{ $Zs := index .gs.LineStates 0 }}
    {{ $Y := index .gs.Layout.Lines 1 }}
    {{ $Ys := index .gs.LineStates 1 }}
    {{ $X := index .gs.Layout.Lines 2 }}
    {{ $Xs := index .gs.LineStates 2 }}
    <svg width="2000" height="400" style="background: black; padding: 200px;">
      <line x1="0" y1="20" x2="376" y2="20" stroke="{{ if $Zs.Taken }}green{{ else }}white{{ end }}" stroke-width="5" />
      {{ if eq .att.Position.LineI 0 }}
        <circle cx="{{ (div .att.Position.Precise 1000) }}" cy="20" r="{{ div_int64 .att.Velocity 1000 }}" />
        <circle cx="{{ (div .att.Position.Precise 1000) }}" cy="20" r="10" />
      {{ end }}
      <line x1="376" y1="20" x2="476" y2="120" stroke="white" stroke-width="5" />
      <line x1="476" y1="120" x2="652" y2="120" stroke="white" stroke-width="5" />
      <line x1="652" y1="120" x2="752" y2="20" stroke="white" stroke-width="5" />
      <line x1="652" y1="120" x2="1052" y2="120" stroke="white" stroke-width="5" />
      <line x1="376" y1="20" x2="752" y2="20" stroke="{{ if $Ys.Taken }}green{{ else }}white{{ end }}" stroke-width="5" />
      {{ if eq .att.Position.LineI 1 }}
        <circle cx="{{ (add 128 (div .att.Position.Precise 1000)) }}" cy="20" r="{{ div_int64 .att.Velocity 1000 }}" />
        <circle cx="{{ (add 128 (div .att.Position.Precise 1000)) }}" cy="20" r="10" />
      {{ end }}
      <line x1="752" y1="20" x2="1128" y2="20" stroke="{{ if $Xs.Taken }}green{{ else }}white{{ end }}" stroke-width="5" />
      {{ if eq .att.Position.LineI 2 }}
        <circle cx="{{ (add 1000 (div .att.Position.Precise 1000)) }}" cy="20" r="{{ div_int64 .att.Velocity 1000 }}" />
        <circle cx="{{ (add 1000 (div .att.Position.Precise 1000)) }}" cy="20" r="10" />
      {{ end }}
      <line x1="376" y1="10" x2="376" y2="30" stroke="black" stroke-width="10" />
      <line x1="752" y1="10" x2="752" y2="30" stroke="black" stroke-width="10" />
      <rect x="470" y="30" width="188" height="80" stroke="white" stroke-width="5" />
    </svg>
  </body>
</html>
{{ end }}
